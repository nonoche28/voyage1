<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Voyages ‚Äì Inspirations & Itin√©raires</title>
  <meta name="description" content="Id√©es de voyages, itin√©raires jour par jour, budgets et cartes." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#0f172a; --card:#111827; --text:#e5e7eb; --muted:#94a3b8; --brand:#60a5fa; --brand-2:#a78bfa; --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35); }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:radial-gradient(1200px 800px at 80% -10%, rgba(96,165,250,.15),transparent),radial-gradient(900px 600px at -10% 10%, rgba(167,139,250,.12),transparent),var(--bg);color:var(--text);line-height:1.6}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header{position:sticky;top:0;z-index:10;backdrop-filter:blur(8px);background:rgba(15,23,42,.5);border-bottom:1px solid rgba(148,163,184,.12)}
    nav{display:flex;align-items:center;justify-content:space-between;gap:16px}
    .logo{font-weight:700;letter-spacing:.4px}.logo b{color:var(--brand)}
    .nav-links{display:flex;gap:14px}.nav-links a{color:var(--muted);text-decoration:none;font-weight:600;padding:8px 10px;border-radius:10px}.nav-links a:hover{color:var(--text);background:rgba(148,163,184,.12)}
    .hero{padding:72px 0 48px;display:grid;grid-template-columns:1.2fr .8fr;gap:32px;align-items:center}
    .title{font-size:clamp(28px,4vw,44px);line-height:1.1;font-weight:800;margin:0 0 12px}
    .gradient{background:linear-gradient(90deg,var(--brand),var(--brand-2));-webkit-background-clip:text;background-clip:text;color:transparent}
    .subtitle{color:var(--muted);margin:0 0 24px;font-size:18px}
    .cta{display:flex;gap:12px}.btn{display:inline-block;padding:12px 16px;border-radius:999px;text-decoration:none;font-weight:700;border:1px solid rgba(148,163,184,.25);cursor:pointer}
    .btn-primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#0b1020;border:none;box-shadow:var(--shadow)} .btn-outline{color:var(--text)}
    .hero-card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.005));border:1px solid rgba(148,163,184,.18);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow)}
    section{padding:36px 0} h2{font-size:clamp(22px,3vw,30px);margin:0 0 16px} p.section-intro{color:var(--muted);margin:0 0 22px}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}.col-4{grid-column:span 4}.col-12{grid-column:span 12}
    @media (max-width:860px){.hero{grid-template-columns:1fr}.col-4{grid-column:span 12}}
    .card{background:var(--card);border:1px solid rgba(148,163,184,.15);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);transition:transform .2s ease,box-shadow .2s ease}
    .card:hover{transform:translateY(-2px)} .card h3{margin:0 0 6px;font-size:18px} .card p{margin:0;color:var(--muted)}
    .tags{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}.tag{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid rgba(148,163,184,.25);color:var(--muted)}
    footer{padding:24px 0 40px;color:var(--muted);text-align:center;font-size:14px;border-top:1px solid rgba(148,163,184,.12)} footer a{color:var(--text);text-decoration:none}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <nav>
        <div class="logo">Tom<span class="muted">.dev</span> <b>‚òÖ</b></div>
        <div class="nav-links">
          <a href="#voyages">Voyages</a>
          <a href="details.html">D√©tails</a>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div>
        <h1 class="title">Bonjour, je suis <span class="gradient">Tom</span> üëã</h1>
        <p class="subtitle">Je partage mes itin√©raires et budgets. Clique sur ¬´ D√©tails ¬ª pour voir le jour-par-jour d‚Äôun voyage.</p>
        <div class="cta">
          <a class="btn btn-primary" href="#voyages">Voir les voyages</a>
          <a class="btn btn-outline" href="mailto:prenom.nom@email.com?subject=Contact%20depuis%20votre%20site">Me contacter</a>
        </div>
      </div>
      <div class="hero-card">
        <strong>Donn√©es</strong>
        <ul class="muted">
          <li>üìÑ <code>data/voyages.csv</code></li>
          <li>üß≠ <code>data/itineraries.csv</code></li>
          <li>üí∂ <code>data/activities.csv</code></li>
        </ul>
      </div>
    </section>

    <section id="voyages">
      <h2>Voyages</h2>
      <p class="section-intro">Place tes CSV dans <code>/data</code>. Clique sur ¬´ D√©tails ¬ª pour le jour-par-jour.</p>

      <div class="card">
        <div id="tripsGrid" class="grid"></div>
        <p class="muted" id="countInfo"></p>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      ¬© <span id="year"></span> Tom ‚Äî Fait avec ‚ù§Ô∏è et beaucoup de caf√©.
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const tripsGrid = document.getElementById('tripsGrid');
    const countInfo = document.getElementById('countInfo');

    const parseCSV = (t) => {
      const lines = t.replace(/\r/g,'').split('\n').filter(Boolean);
      const sep = t.indexOf(';') !== -1 ? ';' : ',';
      return lines.map(l => {
        const out = []; let cur = ''; let inQ = false;
        for (let i=0;i<l.length;i++) {
          const ch = l[i];
          if (ch === '"') { if (inQ && l[i+1] === '"') { cur+='"'; i++; } else { inQ = !inQ; } }
          else if (ch === sep && !inQ) { out.push(cur); cur=''; }
          else { cur += ch; }
        }
        out.push(cur); return out;
      });
    };

    const rowsToTrips = (rows) => {
      const h = rows[0].map(h=>h.trim());
      const idx = Object.fromEntries(h.map((x,i)=>[x,i]));
      return rows.slice(1).filter(r=>r.length>1).map(r=>({
        trip_id:r[idx.trip_id]?.trim()||'',
        title:r[idx.title]?.trim()||'',
        country:r[idx.country]?.trim()||'',
        continent:r[idx.continent]?.trim()||'',
        days:Number(r[idx.days])||0,
        budget_eur:Number(r[idx.budget_eur])||0,
        season:r[idx.season]?.trim()||'',
        themes:(r[idx.themes]||'').split(',').map(t=>t.trim()).filter(Boolean),
        summary:r[idx.summary]?.trim()||'',
        map_url:r[idx.map_url]?.trim()||'',
        cover_image_url:r[idx.cover_image_url]?.trim()||''
      }));
    };

    async function loadTrips() {
      try {
        const t = await (await fetch('data/voyages.csv')).text();
        const trips = rowsToTrips(parseCSV(t));
        render(trips);
      } catch(e) {
        // mini fallback d'exemple si le CSV n'est pas encore ajout√©
        const demo=`trip_id;title;country;continent;days;budget_eur;season;themes;summary;map_url;cover_image_url
CANADA-TRIP;Road trip Canada;Canada;Am√©rique du Nord;12;2200;√ât√©;nature,route;De Toronto √† la p√©ninsule Bruce, puis Sault Ste. Marie.;https://goo.gl/maps/demo;https://images.unsplash.com/photo-1500530855697-b586d89ba3ee`;
        const trips = rowsToTrips(parseCSV(demo));
        render(trips);
      }
    }

    function render(list){
      tripsGrid.innerHTML = list.map(t => card(t)).join('');
      countInfo.textContent = list.length ? `${list.length} voyage(s) affich√©(s)` : 'Aucun voyage.';
    }

    function card(t){
      const budget = t.budget_eur ? new Intl.NumberFormat('fr-FR',{style:'currency',currency:'EUR'}).format(t.budget_eur) : '‚Äî';
      const days = t.days ? `${t.days} j` : '‚Äî';
      const img = t.cover_image_url || 'https://images.unsplash.com/photo-1501785888041-af3ef285b470';
      return `
        <article class="card col-4" style="overflow:hidden">
          <div style="height:160px;border-radius:12px;overflow:hidden;margin-bottom:10px;background:#0b1020">
            <img src="${img}" alt="${t.title}" style="width:100%;height:100%;object-fit:cover;display:block"/>
          </div>
          <h3>${t.title}</h3>
          <p class="muted">${t.country} ‚Ä¢ ${t.continent} ‚Ä¢ ${t.season || 'Saison libre'}</p>
          <p>${t.summary || ''}</p>
          <div class="tags">
            <span class="tag">‚è± ${days}</span>
            <span class="tag">üí∂ ${budget}</span>
            ${t.themes.slice(0,3).map(th=>`<span class="tag">#${th}</span>`).join('')}
          </div>
          <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
            <a class="btn btn-outline" href="${t.map_url}" target="_blank" rel="noopener">Itin√©raire</a>
            <a class="btn btn-primary" href="details.html?trip_id=${encodeURIComponent(t.trip_id)}">D√©tails</a>
          </div>
        </article>`;
    }

    loadTrips();
  </script>
</body>
</html>
